(()=>{var v=new WeakMap,p=new WeakMap,a=[];function d(t,e,s,o){if(e){let i=s[o+2];e={...e,ref:i},v.set(t,e)}else e=v.get(t);if(!e)return;let{state:n,ref:c}=e,r;e.teardowns=[],p.set(t,a[0]),a.unshift(t);try{r=t(n,c)}catch(i){console.error(i)}return a.shift(),u(r,e,c)}var l=new Set,h;function C(t){if(!p.has(t))return!1;let e=p.get(t);return l.has(e)?!0:C(e)}function S(t){for(let e of t.splice(0))l.has(e)||C(e)||l.add(e);h=h!==void 0?h:setTimeout(()=>{for(let e of l)d(e);l.clear(),h=void 0},0)}function g(t){let e={};for(let[s,o]of Object.entries(t)){let n=[];typeof o=="function"&&(o=o.bind(e)),Object.defineProperty(e,s,{get(){return n.push(a[0]),o},set(c){o=c,S(n)}})}return e}function $(t,e,s){let o=e.document.createDocumentFragment();for(let[n,c]of t.entries()){let r=u(c,e,s,n);!r&&r!==0||o.appendChild(r)}return o}function O(t,e,s,o){let n=[...t],c=typeof n[0]=="string",[r,i]=(c?n.shift():"").trim().split(/\s*:\s*/),m=typeof n[0]=="object"&&!Array.isArray(n[0])?n.shift():void 0,[,w,...N]=s,b=w[i]||N[o]||[,{}],[f]=b;if(r!==""&&!f&&(f=e.document.createElement(r)),m)if(r==="")e={...e,state:g(m)};else for(let[k,x]of Object.entries(m))f[k]=x;let j=$(n,e,b);return r===""?f=j:f.appendChild(j),i!==void 0&&(w[i]=f),s[o+2]=b[0]=f}function u(t,e,s,o){if(!(!t&&t!==0||t===!0)){{if(typeof t=="function")return d(t,e,s,o);if(typeof t!="object"){let n=String(t);return e.document.createTextNode(n)}else if(!Array.isArray(t))return t}return O(t,e,s,o)}}var A=new Set(["wbr","track","source","param","meta","link","keygen","input","img","hr","embed","command","col","br","base","area","!doctype"]),M={className:"class"},T={createDocumentFragment:()=>({childNodes:[],appendChild(t){this.childNodes.push(t)},toString(){return this.childNodes.join("")}}),createElement:t=>({childNodes:[],appendChild(e){this.childNodes.push(e)},toString(){let{childNodes:e,appendChild:s,toString:o,...n}=this,c=`<${t}`;for(let[r,i]of Object.entries(n))!i&&i!==0||typeof i=="function"||(r=M[r]||r.replace(/(?=[A-Z])/g,"-").toLowerCase(),c+=` ${r}="${i===!0?"":i}"`);return A.has(t.toLowerCase())?`${c}>`:`${c}>${this.childNodes.join("")}</${t}>`}}),createTextNode:t=>t};function y(t=T){return(e,s,o)=>u(e,{document:t,state:s},[o,{}],0)}typeof window=="object"?window.stew=y:typeof module=="object"&&(module.exports=y);})();
