(()=>{var l=[],d=[];function O(e){}function m(e,t,n,o,r,s){let[c]=l;r={...r};function i(){l.unshift(c),d.unshift(i);let u=[],f;try{f=e(t,u)}catch(p){console.error(p)}h(f,t,n,o,{...r},s);let b=n[o+2];b&&u.push(...b),d.shift(),l.shift()}i.parentImpulse=d[0],i()}var g=new Set,w;function S(e){if(g.has(e))return!0;let{parentImpulse:t}=e;return!!t&&S(t)}function V(e){for(let t of e.splice(0))S(t)||g.add(t);w=w!==void 0?w:setTimeout(()=>{for(let t of g)m(t);g.clear(),w=void 0},0)}function C(e){let t={};for(let[n,o]of Object.entries(e)){let r=[];typeof o=="function"&&(o=o.bind(t)),Object.defineProperty(t,n,{get(){return r.push(d[0]),o},set(s){o=s,V(r)}})}return t}function y(e,t){if(e.parentElement)return;let{container:n}=t,o;for(;t&&!o;)({node:o,sibling:t}=t);o?n.insertBefore(e,o):n.appendChild(e)}function D(e,t,n,o,r){for(let s=e.length-1;s>=0;s--)h(e[s],t,n,s,o,r)}function T(e,t=[],n,o){let r=String(e),[s]=t;return!s||!("nodeValue"in s)?(s=l[0][0].createTextNode(r),y(s,n),[s]):(o&&o.pop(),r!==s.nodeValue&&(s.nodeValue=r),t)}function F(e,t,n,o,r,s){if(!e&&e!==0||e===!0)return[];if(typeof e=="object"&&!Array.isArray(e))return y(e,r),[e];let[c,i,...u]=n,f=s?s.slice(-1):u[o];if(!Array.isArray(e))return T(e,f,r,s);let[b,p,...A]=e,[,j,v]=b.match(/^\s*(.*?)\s*(?::(.*?))?$/),k=j==="";f||(f=i[v]||[]);let a;if(k)p&&(t=C(p));else if([a]=f,a?.tagName?.toLowerCase?.()!==j.toLowerCase()&&(a=l[0][0].createElement(j),y(a,r)),p&&l[0][1](a,p),r={container:a},s){let{childNodes:N}=a;s.pop(),s=[...N]}v&&(c[v]=f),c=f[0]={};let{sibling:L}=r;D(A,t,f,r,s);let{node:E}=r;return k&&E!==L&&(a=E),f.splice(0,2,a,c),f}function h(e,t,n,o,r,s){if(typeof e=="function"){m(e,t,n,o,r,s);return}let c={...r},i=F(e,t,n,o,r,s),[u]=i;n[o+2]=i,u&&Object.assign(r,{node:u,sibling:c})}var q=new Set(["wbr","track","source","param","meta","link","keygen","input","img","hr","embed","command","col","br","base","area","!doctype"]),B={className:"class"},$={createTextNode(e){return{nodeValue:e,toString(){return this.nodeValue}}},createDocumentFragment(){return{childNodes:[],appendChild(e){this.removeChild(e),this.childNodes.push(e),e.parentElement=this},insertBefore(e,t){let{childNodes:n}=this;this.removeChild(e);let o=n.indexOf(t);n.splice(o,0,e),e.parentElement=this},removeChild(e){let{childNodes:t}=this,n=t.indexOf(e);n!==-1&&(t.splice(n,1),e.parentElement=null)},toString(){return this.childNodes.join("")}}},createElement(e){let t=this.createDocumentFragment();return Object.assign(t,{tagName:e,toString(){let{childNodes:n,appendChild:o,toString:r,...s}=this,c=`<${e}`;for(let[i,u]of Object.entries(s))!u&&u!==0||typeof u=="function"||(i=B[i]||i.replace(/(?=[A-Z])/g,"-").toLowerCase(),c+=` ${i}="${u===!0?"":u}"`);return q.has(e.toLowerCase())?`${c}>`:`${c}>${this.childNodes.join("")}</${e}>`}})}},I=typeof window=="object"&&window.document||$;function Q(e,t){for(let[n,o]of Object.entries(t))e[n]!==o&&(e[n]=o)}function M(e,t){let[n,...o]=String(e).split(/(?=\.|\[)/),r=t.createElement(n),s=[];for(let c of o){if(c.startsWith(".")){s.push(c.slice(1));continue}let[,i,u]=c.match(/^\[\s*([^=[]*?)\s*(?:=([^[]*))?\]/);i&&(r[i]=u||!0)}r.className=s.join(" ")}function x(e,t,n=I,o=Q){typeof e!="object"&&(e=n?.querySelector?.(e)||M(e,n));let{childNodes:r}=e;return l.unshift([n,o]),h(t,{},[e,{}],0,{container:e},[...r]),l.shift(),e}Object.assign(x,{useEffect:O,virtualDocument:$});typeof window=="object"?window.stew=x:typeof module=="object"&&(module.exports=x);})();
